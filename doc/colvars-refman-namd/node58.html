<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Parameters for ABF</TITLE>
<META NAME="description" CONTENT="Parameters for ABF">
<META NAME="keywords" CONTENT="colvars-refman-namd">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="colvars-refman-namd.css">

<LINK REL="next" HREF="node59.html">
<LINK REL="previous" HREF="node57.html">
<LINK REL="up" HREF="node56.html">
<LINK REL="next" HREF="node59.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html1022"
  HREF="node59.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html1016"
  HREF="node56.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html1010"
  HREF="node57.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html1018"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/usr/share/latex2html/icons/contents.png"></A> 
<A NAME="tex2html1020"
  HREF="node81.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index"
 SRC="/usr/share/latex2html/icons/index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html1023"
  HREF="node59.html">Multiple-replica ABF</A>
<B> Up:</B> <A NAME="tex2html1017"
  HREF="node56.html">Adaptive Biasing Force</A>
<B> Previous:</B> <A NAME="tex2html1011"
  HREF="node57.html">ABF requirements on collective</A>
 &nbsp; <B>  <A NAME="tex2html1019"
  HREF="node1.html">Contents</A></B> 
 &nbsp; <B>  <A NAME="tex2html1021"
  HREF="node81.html">Index</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H3><A NAME="SECTION00081200000000000000">
Parameters for ABF</A>
</H3>

<P>
ABF depends on parameters from collective variables to define the grid on which free
energy gradients are computed. In the direction of each colvar, the grid ranges from
<TT>lowerBoundary</TT> to <TT>upperBoundary</TT>, and the bin width (grid spacing)
is set by the <TT>width</TT> parameter (see&nbsp;<A HREF="node12.html#sec:colvar_general">3.1</A>).
The following specific parameters can be set in the ABF configuration block
(in addition to generic bias parameters such as <TT>colvars</TT>
- section&nbsp;<A HREF="node55.html#sec:colvarbias">6</A>):

<P>

<UL>
<LI><A NAME="6282"></A>
  <B><BIG CLASS="LARGE"><TT>fullSamples </TT></BIG></B> <SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img19.png"
 ALT="$ \langle $"></B></SPAN>Number of samples in a bin prior
    to application of the ABF<SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img20.png"
 ALT="$  \rangle$"></B></SPAN> 
<BR><B>Context: </B> <TT>abf</TT> 
<BR><B>Acceptable values: </B> positive integer 
<BR><B>Default value: </B> 200 
<BR><B>Description: </B> To avoid nonequilibrium effects due to large fluctuations of the force exerted along the
   colvars, it is recommended to apply a biasing force only after a the estimate has started
   converging. If <TT>fullSamples</TT> is non-zero, the applied biasing force is scaled by a factor
   <!-- MATH
 $\alpha(N_\xi)$
 -->
<SPAN CLASS="MATH"><B><IMG
 WIDTH="50" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img177.png"
 ALT="$ \alpha(N_\xi)$"></B></SPAN> between 0 and 1.
   If the number of samples <SPAN CLASS="MATH"><B><IMG
 WIDTH="24" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img178.png"
 ALT="$ N_\xi$"></B></SPAN> in the current bin is higher than <TT>fullSamples</TT>,
   the factor is one. If it is less than half of <TT>fullSamples</TT>, the factor is zero and
   no bias is applied. Between those two thresholds, the factor follows a linear ramp from
   0 to 1: <!-- MATH
 $\alpha(N_\xi) =(2N_\xi/\mathrm{fullSamples})-1$
 -->
<SPAN CLASS="MATH"><B><IMG
 WIDTH="233" HEIGHT="36" ALIGN="MIDDLE" BORDER="0"
 SRC="img181.png"
 ALT="$ \alpha(N_\xi) =(2N_\xi/\mathrm{fullSamples})-1$"></B></SPAN>.

<P>
</LI>
<LI><A NAME="6303"></A>
  <B><BIG CLASS="LARGE"><TT>maxForce </TT></BIG></B> <SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img19.png"
 ALT="$ \langle $"></B></SPAN>Maximum magnitude of the ABF force<SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img20.png"
 ALT="$  \rangle$"></B></SPAN> 
<BR><B>Context: </B> <TT>abf</TT> 
<BR><B>Acceptable values: </B> positive decimals (one per colvar) 
<BR><B>Default value: </B> disabled 
<BR><B>Description: </B> This option enforces a cap on the magnitude of the biasing force effectively applied
   by this ABF bias on each colvar. This can be useful in the presence of singularities
   in the PMF such as hard walls, where the discretization of the average force becomes
   very inaccurate, causing the colvar's diffusion to get ``stuck'' at the singularity.
   To enable this cap, provide one non-negative value for each colvar. The unit of force
   is kcal/mol divided by the colvar unit.

<P>
</LI>
<LI><A NAME="6324"></A>
  <B><BIG CLASS="LARGE"><TT>hideJacobian </TT></BIG></B> <SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img19.png"
 ALT="$ \langle $"></B></SPAN>Remove geometric entropy term from calculated
    free energy gradient?<SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img20.png"
 ALT="$  \rangle$"></B></SPAN> 
<BR><B>Context: </B> <TT>abf</TT> 
<BR><B>Acceptable values: </B> boolean 
<BR><B>Default value: </B> <TT>no</TT> 
<BR><B>Description: </B> In a few special cases, most notably distance-based variables, an alternate definition of
    the potential of mean force is traditionally used, which excludes the Jacobian
    term describing the effect of geometric entropy on the distribution of the variable.
    This results, for example, in particle-particle potentials of mean force being flat
    at large separations.
    Setting this parameter to <TT>yes</TT> causes the output data to follow that convention,
    by removing this contribution from the output gradients while
    applying internally the corresponding correction to ensure uniform sampling.
    It is not allowed for colvars with multiple components.

<P>
</LI>
<LI><A NAME="6343"></A>
  <B><BIG CLASS="LARGE"><TT>outputFreq </TT></BIG></B> <SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img19.png"
 ALT="$ \langle $"></B></SPAN>Frequency (in timesteps) at which ABF data files are refreshed<SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img20.png"
 ALT="$  \rangle$"></B></SPAN> 
<BR><B>Context: </B> <TT>abf</TT> 
<BR><B>Acceptable values: </B> positive integer 
<BR><B>Default value: </B> Colvar module restart frequency 
<BR><B>Description: </B> The files containing the free energy gradient estimate and sampling histogram
    (and the PMF in one-dimensional calculations) are written on disk at the given
    time interval.

<P>
</LI>
<LI><A NAME="6360"></A>
  <B><BIG CLASS="LARGE"><TT>historyFreq </TT></BIG></B> <SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img19.png"
 ALT="$ \langle $"></B></SPAN>Frequency (in timesteps) at which ABF history files are
  accumulated<SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img20.png"
 ALT="$  \rangle$"></B></SPAN> 
<BR><B>Context: </B> <TT>abf</TT> 
<BR><B>Acceptable values: </B> positive integer 
<BR><B>Default value: </B> 0 
<BR><B>Description: </B> If this number is non-zero, the free energy gradient estimate and sampling histogram
    (and the PMF in one-dimensional calculations) are appended to files on disk at
    the given time interval. History file names use the same prefix as output files, with
    ``<TT>.hist</TT>'' appended.

<P>
</LI>
<LI><A NAME="6377"></A>
  <B><BIG CLASS="LARGE"><TT>inputPrefix </TT></BIG></B> <SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img19.png"
 ALT="$ \langle $"></B></SPAN>Filename prefix for reading ABF data<SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img20.png"
 ALT="$  \rangle$"></B></SPAN> 
<BR><B>Context: </B> <TT>abf</TT> 
<BR><B>Acceptable values: </B> list of strings 
<BR><B>Description: </B> If this parameter is set, for each item in the list, ABF tries to read
    a gradient and a sampling files named <TT><SPAN CLASS="MATH"><B><IMG
 WIDTH="18" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img22.png"
 ALT="$ &lt;$"></B></SPAN>inputPrefix<SPAN CLASS="MATH"><B><IMG
 WIDTH="18" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img23.png"
 ALT="$ &gt;$"></B></SPAN>.grad</TT>
    and <TT><SPAN CLASS="MATH"><B><IMG
 WIDTH="18" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img22.png"
 ALT="$ &lt;$"></B></SPAN>inputPrefix<SPAN CLASS="MATH"><B><IMG
 WIDTH="18" HEIGHT="32" ALIGN="MIDDLE" BORDER="0"
 SRC="img23.png"
 ALT="$ &gt;$"></B></SPAN>.count</TT>. This is done at
    startup and sets the initial state of the ABF algorithm.
    The data from all provided files is combined appropriately.
    Also, the grid definition (min and max values, width) need not be the same
    that for the current run. This command is useful to piece together
    data from simulations in different regions of collective variable space,
    or change the colvar boundary values and widths. Note that it is not
    recommended to use it to switch to a smaller width, as that will leave
    some bins empty in the finer data grid.
    This option is NOT compatible with reading the data from a restart file (<TT>colvarsInput</TT> option of the NAMD config file).

<P>
</LI>
<LI><A NAME="6403"></A>
  <B><BIG CLASS="LARGE"><TT>applyBias </TT></BIG></B> <SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img19.png"
 ALT="$ \langle $"></B></SPAN>Apply the ABF bias?<SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img20.png"
 ALT="$  \rangle$"></B></SPAN> 
<BR><B>Context: </B> <TT>abf</TT> 
<BR><B>Acceptable values: </B> boolean 
<BR><B>Default value: </B> <TT>yes</TT> 
<BR><B>Description: </B>  If this is set to no, the calculation proceeds normally but the adaptive
    biasing force is not applied. Data is still collected to compute
    the free energy gradient. This is mostly intended for testing purposes, and should
    not be used in routine simulations.

<P>
</LI>
<LI><A NAME="6421"></A>
  <B><BIG CLASS="LARGE"><TT>updateBias </TT></BIG></B> <SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img19.png"
 ALT="$ \langle $"></B></SPAN>Update the ABF bias?<SPAN CLASS="MATH"><B><IMG
 WIDTH="13" HEIGHT="34" ALIGN="MIDDLE" BORDER="0"
 SRC="img20.png"
 ALT="$  \rangle$"></B></SPAN> 
<BR><B>Context: </B> <TT>abf</TT> 
<BR><B>Acceptable values: </B> boolean 
<BR><B>Default value: </B> <TT>yes</TT> 
<BR><B>Description: </B>  If this is set to no, the initial biasing force (e.g. read from a restart file or
    through <TT>inputPrefix</TT>) is not updated during the simulation.
    As a result, a constant bias is applied. This can be used to apply a custom, tabulated
    biasing potential to any combination of colvars. To that effect, one should prepare
    a gradient file containing the gradient of the potential to be applied (negative
    of the bias force), and a count file containing only values greater than
    <TT>fullSamples</TT>. These files must match the grid parameters of the colvars.
  
</LI>
</UL>

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html1022"
  HREF="node59.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html1016"
  HREF="node56.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html1010"
  HREF="node57.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html1018"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/usr/share/latex2html/icons/contents.png"></A> 
<A NAME="tex2html1020"
  HREF="node81.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index"
 SRC="/usr/share/latex2html/icons/index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html1023"
  HREF="node59.html">Multiple-replica ABF</A>
<B> Up:</B> <A NAME="tex2html1017"
  HREF="node56.html">Adaptive Biasing Force</A>
<B> Previous:</B> <A NAME="tex2html1011"
  HREF="node57.html">ABF requirements on collective</A>
 &nbsp; <B>  <A NAME="tex2html1019"
  HREF="node1.html">Contents</A></B> 
 &nbsp; <B>  <A NAME="tex2html1021"
  HREF="node81.html">Index</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
Jérôme Hénin
2015-02-27
</ADDRESS>
</BODY>
</HTML>
